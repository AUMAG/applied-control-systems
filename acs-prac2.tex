\documentclass[9pt]{beamer-control}
\usepackage{beamer-control-prac}
\begin{document}
\CONCEPT[2]{Week 2: Characterising and modelling systems}

\begin{frame}
\frametitle{Introduction}
In this practical, ...

\vfill

This practical will consist of the following parts:
\begin{itemize}
\item ...
\end{itemize}
\end{frame}


\SUBCONCEPT{First-principles modelling}

\begin{frame}{Deriving the model}
We begin by deriving a first principles model of the inertia disk. A schematic diagram of the motor armature circuit is shown below.

\begin{figure}
	\centering
	\includegraphics[width=10cm]{prac2_schematic.png}
	\caption{Motor armature circuit schematic diagram.}
\end{figure}
\end{frame}

\begin{frame}{Deriving the model}
The DC motor shaft with moment of inertia $J_m$ is connected to the load hub which is a metal disc used to mount the inertia disc and has a moment of inertia of $J_h$. The back-emf (electromotive) voltage $e)_b(t)$ depends on the speed of the motor shaft, $\omega_m$, and the back-emf constant of the motor $k_m$ and opposes the current flow. The back-emf voltage is given by 
\[e_b(t) = k_m \omega _m (t) \]
Using Kirchoff's Voltage Law, we can write
\[v_m(t) - R_m i_m(t)-L_m \frac{\mathrm{d} i_m(t)}{\mathrm{d} t} - k_m \omega_m (t) = 0\]

\end{frame}

\begin{frame}{Deriving the model}
Since the motor inductance $L_m$ is much less than its resistance $R_m$, it can be ignored and we get
\[i_m(t) = \frac{v_m(t) - k_m \omega_m (t)}{R_m} .\]
The motor shaft equation is
\[(J_m+J_h+J_d)\dot{\omega}_m (t) + D_r \omega _m = \tau_m(t)\]
where $D_r$ is the rotor viscous damping coefficient and $\tau_m$ is the applied torque to the DC motor based on the current,
\[ \tau_m(t) = k_m i_m (t).\]
The moment of inertia about the disk can be determined by
\[J_d = \tfrac{1}{2} m_d r_d^2.\]
\end{frame}


\begin{frame}{Deriving the model}
These linear differential equations can be assembled in a state space representation as 
\[\dot{\mathbf{x}} =\mathbf{A}\mathbf{x} + \mathbf{B} \mathbf{u} \quad \text{and} \quad \mathbf{y} =\mathbf{C}\mathbf{x} + \mathbf{D} \mathbf{u} \quad \]	
where the state and output vectors are
\[\mathbf{x} = \begin{bmatrix}
\theta_m \\ \omega_m
\end{bmatrix}
\quad \text{and} \quad \mathbf{y} = \theta_m .\]
Setting the input as $\mathbf{u}=v_m$, the matrices are
\[
\mathbf{A}=\begin{bmatrix}
	0 & 1 \\
	0 & -\left(\tfrac{R_m D_r + k_m^2}{R_m(J_m+J_h+J_d)}\right)
\end{bmatrix},
\mathbf{B} = \begin{bmatrix}
	0 \\ \tfrac{k_m}{R_m(J_m+J_h+J_d)}
\end{bmatrix}, 
\mathbf{C} = \begin{bmatrix}
	1 & 0
\end{bmatrix},
\mathbf{D} = \begin{bmatrix}
	0
\end{bmatrix}
\]  
\end{frame}

\begin{frame}{Simulating the model}
The required parameter values for the QUBE inertia disk are $R_m=8.4\Omega$, $k_m=0.042$ V/(rad/s), $D_r=2\times 10^{-5}$ N.m.s/rad, $J_m = 4\times 10^{-6}$ kg.m$^2$, $J_h = 0.65 \times 10^{-6}$ kg.m$^2$, $m_d=0.053$ kg, and $r_d = 0.0248$ m.

Defining the matrices $\mathbf{A}$, $\mathbf{B}$, $\mathbf{C}$, and $\mathbf{D}$ in MATLAB allow us to simulate the modelled system in MATLAB and Simulink.
\end{frame}

\begin{frame}{Simulating the model}
\textbf{Simulating in MATLAB}\\
\% Define A, B, C, and D matrices here\\
A = \\
B = \\
C = \\
D = \\
model\_inertia\_disk = ss(A,B,C,D); \\
\% Define state, input, and output names\\
State\_names = str2mat(`theta',`omega');\\
set(model\_inertia\_disk,`StateName',Statenames);\\
set(model\_inertia\_disk,'InputName',{'V\_{command}'},...\\
'OutputName',{'theta'}); \\
step(model\_inertia\_disk)
\end{frame}


\begin{frame}{Simulating the model}
\textbf{Simulating in Simulink}\\
Create a state-space block in Simulink and use the $\mathbf{A}$, $\mathbf{B}$, $\mathbf{C}$, and $\mathbf{D}$ matrices as defined by your MATLAB script (Simulink can use these matrices if they are in your MATLAB workspace). 

You may compare the  model with the physical plant by inputting the same input (constant 1V step input) and connecting the output of the physical QUBE and the output of the state-space block to the same scope.
\end{frame}




\SUBCONCEPT{Characterising the output response}

\begin{frame}{Parameter calculation}
An alternative method to deriving a first principles model is to identify the system by fitting a curve to the output response. The open loop (no feedback) response of the inertia disk may be modelled as an Integrator with Time Delay (ITD) model which requires two parameters, $a$ and $L$.
	
The intercept $a$ and the time lag $L$ may be calculated according to the definition in the notes (also shown in the following figure). The Scope has an excellent feature to measure individual points for you. Select tools > Measurements > Cursor Measurements to assist in identifying individual points. The vertical lines which appear may be dragged left and right to select points and specific data is given in the Cursor Measurements box on the right of the scope window.
\end{frame}

\begin{frame}
	\begin{figure}
		\centering
		\includegraphics[width=8cm]{prac1_itd.png}
		\caption{Integrator with Time Delay (ITD) model.}
	\end{figure}
\end{frame}

\begin{frame}
	When we start looking at controlling a system to reach a desired output we will see that deriving models or characterising output responses give us methods of determining good controllers. Next week we will be introduced to the concept of feedback to control the inertia disk to reach a desired angle. 
\end{frame}




\SUMMARYFRAME

\end{document}
